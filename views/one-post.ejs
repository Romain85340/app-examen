<%- include("./partials/header") -%>
<%- include("./partials/navbar") -%>
<div class="under-navbar"></div>


    <main class='single-post'>
        <div class="card">
            <div class="card-header">
              <img src="<%= post.image%>" class="img-fluid" alt="">
            </div>
            <div class="card-body d-flex flex-column">
              <h1 class="card-title"><%= post.title%></h1>
              <h2 class="card-category"><%= post.category%></h2>
              <p class="card-text"><%= post.content%></p>
              <div class="status d-flex justify-content-around flex-wrap">
                <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#exampleModal"><%= post.good_status%> personnes aiment cet article <i class="fas fa-thumbs-up"></i></button>
                <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#exampleModal2"><%= post.bad_status%> personnes n'aiment pas cet article <i class="fas fa-thumbs-down"></i></button>
                <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#exampleModal3"><%= post.comment%> personnes ont comment√© cet article <i class="fas fa-comment"></i></button>
              </div>
              <div class="btn-card d-flex justify-content-center flex-wrap">
                <div class="btn-status d-flex flex-wrap">
                  <a class="like" href="/like/<%= post.id_post%>">J'aime</a>
                  <a class="dislike" href="/dislike/<%= post.id_post%>">Je n'aime pas</a>
                  <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#exampleModal3">Commenter</button>
                </div>
              </div>
            </div>
        </div>

        <!-- Modal Like-->
        <div class="modal fade modal-like" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
            <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLabel">Les personnes qui aiment cet article</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
                </div>
                <div class="modal-body">

                    <% good_status.forEach(function(entry) {%>
                    <div class="profil d-flex align-items-center">
                        <img src="<%= entry.image_profil%>" alt="">
                        <p><%= entry.firstname%> <%= entry.lastname%></p>
                    </div>
                    <%});%>

                </div>
                <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">Fermer</button>
                </div>
            </div>
            </div>
        </div>

        <!-- Modal Dislike-->
        <div class="modal fade modal-dislike" id="exampleModal2" tabindex="-1" aria-labelledby="exampleModalLabel2" aria-hidden="true">
            <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLabel">Les personnes qui n'aiment pas cet article</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
                </div>
                <div class="modal-body">
                 
                    <% bad_status.forEach(function(entry) {%>
                        <div class="profil d-flex align-items-center">
                            <img src="<%= entry.image_profil%>" alt="">
                            <p><%= entry.firstname%> <%= entry.lastname%></p>
                        </div>
                    <%});%>

                </div>
                <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">Fermer</button>
                </div>
            </div>
            </div>
        </div>

        <!-- Modal Comment-->
        <div class="modal fade modal-comment" id="exampleModal3" tabindex="-1" aria-labelledby="exampleModalLabel3" aria-hidden="true">
            <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLabel">Les commentaires de l'article</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
                </div>
                <div class="modal-body d-flex flex-column">
                    <% comment.forEach(function(entry) {%>
                    <div class="not-user">
                        <div class="profil d-flex align-items-center flex-wrap">
                            <img src="<%= entry.image_profil%>" alt="">
                            <h2><%= entry.firstname%> <%= entry.lastname%>: </h2>
                        </div>
                        <p><%= entry.content%></p>
                    </div>
                    <%});%>
                    <% if (typeof urComment != "undefined") { %>
                        <% urComment.forEach(function(entry) {%>
                        <hr>
                        <div class="user d-flex flex-column">
                            <h2>Votre commentaire</h2>
                            <p><%= entry.content%></p>
                        </div>
                        <%});%>
                    <% } %>
                </div>
                <form action="/comment/<%= post.id_post%>" method="POST">
                <div class="modal-footer d-flex flex-column">
                    <textarea name="comment" id="" cols="50" rows="3" placeholder="Laisser un commentaire"></textarea>
                    <div class="button-comment-modal">
                        <button type="submit" class="btn btn-primary">Envoyer</button>
                        <button type="button" class="btn btn-secondary" data-dismiss="modal">Fermer</button>
                    </div>
                </div>
                </form>
            </div>
            </div>
        </div>
    </main>

<%- include('./partials/footer') -%>